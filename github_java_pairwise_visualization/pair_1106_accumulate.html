<pre style='background-color:blue;'>
<font color='blue'>

    public static void buildheap(int []a){
        n=a.length-1;
        for(int i=n/2;i&gt;=0;i--){
            maxheap(a,i);
        }
    }
    
    public static void maxheap(int[] a, int i)<font color='#ff0000' weight='1' id='295'>{ 
        <font color='#ff0000' weight='1' id='135'><font color='#ff0000' weight='1' id='124'>left<font color='#ff0000' weight='1' id='123'></font></font><font color='#ff0000' weight='1' id='126'>=</font><font color='#ff0000' weight='1' id='128'>2</font>*<font color='#ff0000' weight='1' id='129'></font>i<font color='#ff0000' weight='1' id='131'></font>;
        </font><font color='#ff0000' weight='1' id='152'><font color='#ff0000' weight='1' id='150'>right=<font color='#ff0000' weight='1' id='138'></font>2<font color='#ff0000' weight='1' id='140'></font>*<font color='#ff0000' weight='1' id='142'></font><font color='#ff0000' weight='1' id='145'>i<font color='#ff0000' weight='1' id='144'></font></font>+<font color='#ff0000' weight='1' id='146'></font>1<font color='#ff0000' weight='1' id='148'></font>;</font><font color='#ff0000' weight='1' id='151'></font>
        </font><font color='#ff0000' weight='1' id='206'>if(<font color='#ff0000' weight='1' id='154'>left </font>&lt;=<font color='#ff0000' weight='1' id='155'></font> n &amp;&amp; <font color='#ff0000' weight='1' id='162'>a</font>[left] &gt; a<font color='#ff0000' weight='1' id='177'>[i]<font color='#ff0000' weight='1' id='176'></font></font>)<font color='#ff0000' weight='1' id='180'></font><font color='#ff0000' weight='1' id='193'>{
            <font color='#ff0000' weight='1' id='183'>largest<font color='#ff0000' weight='1' id='182'></font></font><font color='#ff0000' weight='1' id='185'>=<font color='#ff0000' weight='1' id='184'></font></font>left;
        }
        </font><font color='#ff0000' weight='1' id='205'>else{
            largest<font color='#ff0000' weight='1' id='197'>=</font>i;<font color='#ff0000' weight='1' id='201'></font>
        }</font>
        
        </font>if(<font color='#ff0000' weight='1' id='233'>right<font color='#ff0000' weight='1' id='207'></font> &lt;= n &amp;&amp; <font color='#ff0000' weight='1' id='222'>a<font color='#ff0000' weight='1' id='215'></font><font color='#ff0000' weight='1' id='221'>[<font color='#ff0000' weight='1' id='218'>right<font color='#ff0000' weight='1' id='217'></font></font>]</font> </font>&gt;<font color='#ff0000' weight='1' id='223'></font> <font color='#ff0000' weight='1' id='232'>a<font color='#ff0000' weight='1' id='231'>[largest]<font color='#ff0000' weight='1' id='230'></font></font></font>)</font><font color='#ff0000' weight='1' id='234'></font><font color='#ff0000' weight='1' id='247'>{
            <font color='#ff0000' weight='1' id='242'>largest<font color='#ff0000' weight='1' id='239'>=<font color='#ff0000' weight='1' id='238'></font></font><font color='#ff0000' weight='1' id='241'>right</font>;</font>
        }</font>
        <font color='#ff0000' weight='1' id='293'>if<font color='#ff0000' weight='1' id='257'>(<font color='#ff0000' weight='1' id='250'>largest</font>!=<font color='#ff0000' weight='1' id='254'>i</font>)</font><font color='#ff0000' weight='1' id='292'>{
            <font color='#ff0000' weight='1' id='273'><font color='#ff0000' weight='1' id='259'>exchange<font color='#ff0000' weight='1' id='258'></font></font><font color='#ff0000' weight='1' id='269'>(<font color='#ff0000' weight='1' id='263'><font color='#ff0000' weight='1' id='262'>i</font>,</font><font color='#ff0000' weight='1' id='267'>largest<font color='#ff0000' weight='1' id='264'></font>)</font></font>;<font color='#ff0000' weight='1' id='272'></font>
            </font><font color='#ff0000' weight='1' id='289'><font color='#ff0000' weight='1' id='286'><font color='#ff0000' weight='1' id='275'>maxheap<font color='#ff0000' weight='1' id='274'></font></font>(<font color='#ff0000' weight='1' id='278'><font color='#ff0000' weight='1' id='277'>a</font></font>, <font color='#ff0000' weight='1' id='281'>largest<font color='#ff0000' weight='1' id='280'></font></font>)<font color='#ff0000' weight='1' id='284'></font></font>;<font color='#ff0000' weight='1' id='288'></font>
        }</font><font color='#ff0000' weight='1' id='290'></font></font>
    }</font></font>
    
    public static void exchange(int i, int j){
        int t=a[i];
        a[i]=a[j];
        a[j]=t; 
        }
    
    public static void sort(int []a0){
        a=a0;
        buildheap(a);
        
        for(int i=n;i&gt;0;i--){
            exchange(0, i);
            n=n-1;
            maxheap(a, 0);
        }
    }</font>
</pre>
<pre style='background-color:blue;'>
<font color='blue'>
    public static &lt;T extends Comparable&lt;T&gt;&gt; void sort(List&lt;T&gt; a) {
        Collections.shuffle(a);
        sort(a, 0, a.size() - 1);
    }

    private static &lt;T extends Comparable&lt;T&gt;&gt; void sort(List&lt;T&gt; a, int lo, int hi) {
        if (hi &lt;= lo + M) {
            Insertion.sort(a, lo, hi);
            return;
        }

        int j = partition(a, lo, hi);

        sort(a, lo, j - 1);
        sort(a, j + 1, hi);
    }

    
    public static &lt;T extends Comparable&lt;T&gt;&gt; void mediansort(List&lt;T&gt; a) {
        Collections.shuffle(a);
        mediansort(a, 0, a.size() - 1);
    }

    private static &lt;T extends Comparable&lt;T&gt;&gt; void mediansort(List&lt;T&gt; a, int lo, int hi) {
        if (hi &lt;= lo + M) {
            Insertion.sort(a, lo, hi);
            return;
        }

        T pivot = SortUtils.median(a, lo, hi);
        int i = lo, j = hi - 1; 

        for (; ; ) {
            while (a.get(++i).compareTo(pivot) &lt; 0) ;
            while (pivot.compareTo(a.get(--j)) &lt; 0) ;
            if (i &lt; j)
                SortUtils.exchange(a, i, j);
            else break;
        }

        SortUtils.exchange(a, i, hi - 1); 

        mediansort(a, lo, i - 1);
        mediansort(a, i + 1, hi);
    }

    private static &lt;T extends Comparable&lt;T&gt;&gt; int partition(List&lt;T&gt; a, int lo, int hi) {
        int i = lo;
        int j = hi + 1;

        T v = a.get(lo);

        while (true) {
            while (SortUtils.less(a.get(++i), v)) if (i == hi) break;
            while (SortUtils.less(v, a.get(--j))) if (j == lo) break;

            if (i &gt;= j) break;
            SortUtils.exchange(a, i, j);
        }

        SortUtils.exchange(a, lo, j);

        return j;
    }</font>
</pre>
