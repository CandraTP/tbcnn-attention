<pre style='background-color:blue;'>
<font color='blue'>
 public static void sort(Comparable[] a) {
    int n = a.length;

    
    int h = 1;
    while (h &lt; n/3) h = 3*h + 1;

    while (h &gt;= 1) {
      
      for (int i = h; i &lt; n; i++) {
        for (int j = i; j &gt;= h &amp;&amp; less(a[j], a[j-h]); j -= h) {
          exch(a, j, j-h);
        }
      }
      h /= 3;
    }
  }

  private static boolean less(Comparable v, Comparable w) <font color='#ff0000' weight='1' id='275'>{
    <font color='#ff0000' weight='1' id='273'>return <font color='#ff0000' weight='1' id='271'><font color='#ff0000' weight='1' id='266'><font color='#ff0000' weight='1' id='259'><font color='#ff0000' weight='1' id='254'>v<font color='#ff0000' weight='1' id='253'></font></font><font color='#ff0000' weight='1' id='256'>.<font color='#ff0000' weight='1' id='255'></font></font><font color='#ff0000' weight='1' id='258'>compareTo<font color='#ff0000' weight='1' id='257'></font></font></font><font color='#ff0000' weight='1' id='265'>(<font color='#ff0000' weight='1' id='263'><font color='#ff0000' weight='1' id='262'><font color='#ff0000' weight='1' id='261'>w<font color='#ff0000' weight='1' id='260'></font></font></font>)</font><font color='#ff0000' weight='1' id='264'></font></font> </font><font color='#ff0000' weight='1' id='268'>&lt; </font><font color='#ff0000' weight='1' id='270'>0</font>;</font><font color='#ff0000' weight='1' id='272'></font>
  }</font><font color='#ff0000' weight='1' id='274'></font></font>

  private static void exch(Object[] a, int i, int j) {
    Object swap = a[i];
    a[i] = a[j];
    a[j] = swap;
  }</font>
</pre>
<pre style='background-color:blue;'>
<font color='blue'>
<font color='#ff0000' weight='1' id='235'><font color='#ff0000' weight='1' id='2'>protected </font>void sort<font color='#ff0000' weight='1' id='33'>(T[] <font color='#ff0000' weight='1' id='15'>array</font>, <font color='#ff0000' weight='1' id='24'><font color='#ff0000' weight='1' id='23'>int <font color='#ff0000' weight='1' id='22'>leftIndex</font></font>, </font><font color='#ff0000' weight='1' id='31'><font color='#ff0000' weight='1' id='30'>int <font color='#ff0000' weight='1' id='29'>rightIndex</font></font>)</font><font color='#ff0000' weight='1' id='32'></font> </font><font color='#ff0000' weight='1' id='234'>{
        
        <font color='#ff0000' weight='1' id='232'>if <font color='#ff0000' weight='1' id='47'>(<font color='#ff0000' weight='1' id='40'><font color='#ff0000' weight='1' id='35'>array</font><font color='#ff0000' weight='1' id='37'>.</font><font color='#ff0000' weight='1' id='39'>length</font> </font><font color='#ff0000' weight='1' id='42'>&gt; </font><font color='#ff0000' weight='1' id='44'>1</font>)</font><font color='#ff0000' weight='1' id='231'> <font color='#ff0000' weight='1' id='230'>{
            
            <font color='#ff0000' weight='1' id='65'><font color='#ff0000' weight='1' id='63'><font color='#ff0000' weight='1' id='50'><font color='#ff0000' weight='1' id='49'>T</font> </font><font color='#ff0000' weight='1' id='52'>aux </font><font color='#ff0000' weight='1' id='62'>= <font color='#ff0000' weight='1' id='61'><font color='#ff0000' weight='1' id='60'><font color='#ff0000' weight='1' id='54'>array</font><font color='#ff0000' weight='1' id='59'>[<font color='#ff0000' weight='1' id='57'><font color='#ff0000' weight='1' id='56'>leftIndex<font color='#ff0000' weight='1' id='55'></font></font>]</font><font color='#ff0000' weight='1' id='58'></font></font></font></font></font>;</font><font color='#ff0000' weight='1' id='64'></font>
            
            </font><font color='#ff0000' weight='1' id='228'>for (int i = <font color='#ff0000' weight='1' id='72'>leftIndex</font>; i &lt; <font color='#ff0000' weight='1' id='83'>rightIndex</font>; i++) <font color='#ff0000' weight='1' id='227'>{
                <font color='#ff0000' weight='1' id='225'>for (int j = <font color='#ff0000' weight='1' id='101'>leftIndex</font>; j <font color='#ff0000' weight='1' id='110'>&lt; </font><font color='#ff0000' weight='1' id='112'>rightIndex</font>; j<font color='#ff0000' weight='1' id='119'>++</font>) <font color='#ff0000' weight='1' id='224'>{
                    
                    <font color='#ff0000' weight='1' id='222'>if <font color='#ff0000' weight='1' id='159'>(<font color='#ff0000' weight='1' id='157'><font color='#ff0000' weight='1' id='131'><font color='#ff0000' weight='1' id='125'>array</font><font color='#ff0000' weight='1' id='130'>[<font color='#ff0000' weight='1' id='128'>j]</font><font color='#ff0000' weight='1' id='129'></font></font></font><font color='#ff0000' weight='1' id='133'>.</font><font color='#ff0000' weight='1' id='152'><font color='#ff0000' weight='1' id='135'>compareTo</font><font color='#ff0000' weight='1' id='151'>(<font color='#ff0000' weight='1' id='149'><font color='#ff0000' weight='1' id='148'><font color='#ff0000' weight='1' id='147'><font color='#ff0000' weight='1' id='137'>array<font color='#ff0000' weight='1' id='136'></font></font><font color='#ff0000' weight='1' id='146'>[<font color='#ff0000' weight='1' id='144'><font color='#ff0000' weight='1' id='139'>j</font><font color='#ff0000' weight='1' id='141'>+</font><font color='#ff0000' weight='1' id='143'>1</font>]</font><font color='#ff0000' weight='1' id='145'></font></font></font></font>)</font><font color='#ff0000' weight='1' id='150'></font></font> </font><font color='#ff0000' weight='1' id='154'>&gt; </font>0)</font><font color='#ff0000' weight='1' id='158'></font></font><font color='#ff0000' weight='1' id='221'> <font color='#ff0000' weight='1' id='220'>{
                        <font color='#ff0000' weight='1' id='174'><font color='#ff0000' weight='1' id='172'><font color='#ff0000' weight='1' id='161'>aux </font><font color='#ff0000' weight='1' id='163'>=<font color='#ff0000' weight='1' id='162'></font> </font><font color='#ff0000' weight='1' id='165'>array</font>[<font color='#ff0000' weight='1' id='167'>j</font>];</font><font color='#ff0000' weight='1' id='173'></font>
                        </font><font color='#ff0000' weight='1' id='176'>array</font>[<font color='#ff0000' weight='1' id='178'>j</font>] = <font color='#ff0000' weight='1' id='186'>array</font>[j<font color='#ff0000' weight='1' id='190'>+<font color='#ff0000' weight='1' id='189'></font></font><font color='#ff0000' weight='1' id='192'>1<font color='#ff0000' weight='1' id='191'></font></font>];
                        <font color='#ff0000' weight='1' id='201'>array</font>[j<font color='#ff0000' weight='1' id='205'>+<font color='#ff0000' weight='1' id='204'></font></font><font color='#ff0000' weight='1' id='207'>1<font color='#ff0000' weight='1' id='206'></font></font>] = <font color='#ff0000' weight='1' id='215'>aux</font>;
                    }</font></font>
                    
                }</font><font color='#ff0000' weight='1' id='223'></font></font>
            }</font><font color='#ff0000' weight='1' id='226'></font></font>
        }</font><font color='#ff0000' weight='1' id='229'></font></font></font>
        
    }</font><font color='#ff0000' weight='1' id='233'></font></font></font></font>
</pre>
