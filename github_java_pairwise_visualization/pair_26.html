<pre style='background-color:blue;'>
<font color='blue'>
 public static void shellSort(int[] arr) {
      int inner, outer;
      int temp;

      int h = 1;
      while (h &lt;= arr.length / 3) {
         h = h * 3 + 1;
      }
      while (h &gt; 0) {
         for (outer = h; outer &lt; arr.length; outer++) {
            temp = arr[outer];
            inner = outer;

            while (inner &gt; h - 1 &amp;&amp; arr[inner - h] &gt;= temp) {
               arr[inner] = arr[inner - h];
               inner -= h;
            }
            arr[inner] = temp;
         }
         h = (h - 1) / 3;
      }
   }  </font>
</pre>
<pre style='background-color:blue;'>
<font color='blue'>
  private static int[] sort(char[] a) <font color='#ff0000' weight='1' id='402'>{
        <font color='#ff0000' weight='1' id='39'>int n <font color='#ff0000' weight='1' id='38'>= <font color='#ff0000' weight='1' id='37'><font color='#ff0000' weight='1' id='36'><font color='#ff0000' weight='1' id='31'>a</font><font color='#ff0000' weight='1' id='33'>.<font color='#ff0000' weight='1' id='32'></font></font><font color='#ff0000' weight='1' id='35'>length<font color='#ff0000' weight='1' id='34'></font></font></font></font></font>;</font><font color='#ff0000' weight='1' id='40'></font>
        <font color='#ff0000' weight='1' id='46'><font color='#ff0000' weight='1' id='43'>int</font><font color='#ff0000' weight='1' id='45'>[]<font color='#ff0000' weight='1' id='44'></font></font></font> order <font color='#ff0000' weight='1' id='61'>= <font color='#ff0000' weight='1' id='60'><font color='#ff0000' weight='1' id='51'>new<font color='#ff0000' weight='1' id='50'></font> </font><font color='#ff0000' weight='1' id='59'><font color='#ff0000' weight='1' id='53'>int<font color='#ff0000' weight='1' id='52'></font></font><font color='#ff0000' weight='1' id='58'>[<font color='#ff0000' weight='1' id='56'><font color='#ff0000' weight='1' id='55'>n<font color='#ff0000' weight='1' id='54'></font></font>]</font><font color='#ff0000' weight='1' id='57'></font></font></font></font></font>;
        <font color='#ff0000' weight='1' id='69'><font color='#ff0000' weight='1' id='66'>int</font><font color='#ff0000' weight='1' id='68'>[]<font color='#ff0000' weight='1' id='67'></font></font></font> count = <font color='#ff0000' weight='1' id='87'><font color='#ff0000' weight='1' id='74'>new<font color='#ff0000' weight='1' id='73'></font> </font><font color='#ff0000' weight='1' id='86'><font color='#ff0000' weight='1' id='76'>int<font color='#ff0000' weight='1' id='75'></font></font><font color='#ff0000' weight='1' id='85'>[<font color='#ff0000' weight='1' id='83'><font color='#ff0000' weight='1' id='78'>R<font color='#ff0000' weight='1' id='77'></font> </font><font color='#ff0000' weight='1' id='80'>+<font color='#ff0000' weight='1' id='79'></font> </font>1]</font><font color='#ff0000' weight='1' id='84'></font></font></font></font>; 
        <font color='#ff0000' weight='1' id='114'><font color='#ff0000' weight='1' id='112'><font color='#ff0000' weight='1' id='97'><font color='#ff0000' weight='1' id='96'><font color='#ff0000' weight='1' id='93'>char</font><font color='#ff0000' weight='1' id='95'>[]<font color='#ff0000' weight='1' id='94'></font></font></font> </font><font color='#ff0000' weight='1' id='99'>sorted<font color='#ff0000' weight='1' id='98'></font> </font><font color='#ff0000' weight='1' id='111'>= <font color='#ff0000' weight='1' id='110'>new <font color='#ff0000' weight='1' id='109'>char<font color='#ff0000' weight='1' id='108'>[<font color='#ff0000' weight='1' id='106'><font color='#ff0000' weight='1' id='105'>n<font color='#ff0000' weight='1' id='104'></font></font>]</font><font color='#ff0000' weight='1' id='107'></font></font></font></font></font>;</font><font color='#ff0000' weight='1' id='113'></font>
        
        </font><font color='#ff0000' weight='1' id='179'>for <font color='#ff0000' weight='1' id='143'>(<font color='#ff0000' weight='1' id='126'><font color='#ff0000' weight='1' id='124'><font color='#ff0000' weight='1' id='117'><font color='#ff0000' weight='1' id='116'>int<font color='#ff0000' weight='1' id='115'></font></font> </font><font color='#ff0000' weight='1' id='119'>i<font color='#ff0000' weight='1' id='118'></font> </font><font color='#ff0000' weight='1' id='123'>= <font color='#ff0000' weight='1' id='122'><font color='#ff0000' weight='1' id='121'>0<font color='#ff0000' weight='1' id='120'></font></font></font></font>;</font><font color='#ff0000' weight='1' id='125'></font> </font><font color='#ff0000' weight='1' id='135'><font color='#ff0000' weight='1' id='133'><font color='#ff0000' weight='1' id='128'>i<font color='#ff0000' weight='1' id='127'></font> </font><font color='#ff0000' weight='1' id='130'>&lt; </font><font color='#ff0000' weight='1' id='132'>n</font>;</font><font color='#ff0000' weight='1' id='134'></font> </font><font color='#ff0000' weight='1' id='141'><font color='#ff0000' weight='1' id='140'><font color='#ff0000' weight='1' id='137'>i<font color='#ff0000' weight='1' id='136'></font></font>++</font>)</font><font color='#ff0000' weight='1' id='142'></font> </font><font color='#ff0000' weight='1' id='178'>{
            <font color='#ff0000' weight='1' id='171'><font color='#ff0000' weight='1' id='145'>count</font><font color='#ff0000' weight='1' id='170'>[<font color='#ff0000' weight='1' id='168'>(<font color='#ff0000' weight='1' id='149'>(<font color='#ff0000' weight='1' id='148'></font></font>int) <font color='#ff0000' weight='1' id='161'><font color='#ff0000' weight='1' id='155'>a<font color='#ff0000' weight='1' id='154'></font></font><font color='#ff0000' weight='1' id='160'>[<font color='#ff0000' weight='1' id='158'><font color='#ff0000' weight='1' id='157'>i<font color='#ff0000' weight='1' id='156'></font></font>]</font><font color='#ff0000' weight='1' id='159'></font></font></font><font color='#ff0000' weight='1' id='163'>)<font color='#ff0000' weight='1' id='162'></font> </font>+ 1]</font><font color='#ff0000' weight='1' id='169'></font></font></font><font color='#ff0000' weight='1' id='173'>++<font color='#ff0000' weight='1' id='172'></font></font>;
        }</font>
        
        </font><font color='#ff0000' weight='1' id='236'>for <font color='#ff0000' weight='1' id='208'>(<font color='#ff0000' weight='1' id='191'><font color='#ff0000' weight='1' id='189'><font color='#ff0000' weight='1' id='182'><font color='#ff0000' weight='1' id='181'>int<font color='#ff0000' weight='1' id='180'></font></font> </font><font color='#ff0000' weight='1' id='184'>i<font color='#ff0000' weight='1' id='183'></font> </font><font color='#ff0000' weight='1' id='188'>= <font color='#ff0000' weight='1' id='187'><font color='#ff0000' weight='1' id='186'>1<font color='#ff0000' weight='1' id='185'></font></font></font></font>;</font><font color='#ff0000' weight='1' id='190'></font> </font><font color='#ff0000' weight='1' id='200'>i &lt;= <font color='#ff0000' weight='1' id='197'>R<font color='#ff0000' weight='1' id='196'></font></font>; </font><font color='#ff0000' weight='1' id='206'><font color='#ff0000' weight='1' id='205'><font color='#ff0000' weight='1' id='202'>i<font color='#ff0000' weight='1' id='201'></font></font><font color='#ff0000' weight='1' id='204'>++<font color='#ff0000' weight='1' id='203'></font></font></font>)</font><font color='#ff0000' weight='1' id='207'></font> </font><font color='#ff0000' weight='1' id='235'>{
            <font color='#ff0000' weight='1' id='233'><font color='#ff0000' weight='1' id='231'><font color='#ff0000' weight='1' id='216'><font color='#ff0000' weight='1' id='210'>count</font><font color='#ff0000' weight='1' id='215'>[<font color='#ff0000' weight='1' id='213'><font color='#ff0000' weight='1' id='212'>i<font color='#ff0000' weight='1' id='211'></font></font>]</font><font color='#ff0000' weight='1' id='214'></font></font> </font>+= <font color='#ff0000' weight='1' id='230'><font color='#ff0000' weight='1' id='220'>count</font><font color='#ff0000' weight='1' id='229'>[<font color='#ff0000' weight='1' id='227'><font color='#ff0000' weight='1' id='222'>i<font color='#ff0000' weight='1' id='221'></font> </font><font color='#ff0000' weight='1' id='224'>-<font color='#ff0000' weight='1' id='223'></font> </font><font color='#ff0000' weight='1' id='226'>1<font color='#ff0000' weight='1' id='225'></font></font>]</font><font color='#ff0000' weight='1' id='228'></font></font></font>;</font><font color='#ff0000' weight='1' id='232'></font>
        }</font><font color='#ff0000' weight='1' id='234'></font></font>
        
        
        </font><font color='#ff0000' weight='1' id='342'>for <font color='#ff0000' weight='1' id='265'>(<font color='#ff0000' weight='1' id='248'><font color='#ff0000' weight='1' id='246'><font color='#ff0000' weight='1' id='239'><font color='#ff0000' weight='1' id='238'>int</font> </font><font color='#ff0000' weight='1' id='241'>i<font color='#ff0000' weight='1' id='240'></font> </font><font color='#ff0000' weight='1' id='245'>= <font color='#ff0000' weight='1' id='244'><font color='#ff0000' weight='1' id='243'>0<font color='#ff0000' weight='1' id='242'></font></font></font></font>;</font><font color='#ff0000' weight='1' id='247'></font> </font><font color='#ff0000' weight='1' id='257'><font color='#ff0000' weight='1' id='255'><font color='#ff0000' weight='1' id='250'>i </font><font color='#ff0000' weight='1' id='252'>&lt; </font><font color='#ff0000' weight='1' id='254'>n</font>;</font> </font>i++) </font><font color='#ff0000' weight='1' id='341'>{
            <font color='#ff0000' weight='1' id='298'><font color='#ff0000' weight='1' id='296'><font color='#ff0000' weight='1' id='291'><font color='#ff0000' weight='1' id='267'>order<font color='#ff0000' weight='1' id='266'></font></font><font color='#ff0000' weight='1' id='290'>[<font color='#ff0000' weight='1' id='288'><font color='#ff0000' weight='1' id='287'><font color='#ff0000' weight='1' id='269'>count<font color='#ff0000' weight='1' id='268'></font></font><font color='#ff0000' weight='1' id='286'>[<font color='#ff0000' weight='1' id='284'><font color='#ff0000' weight='1' id='271'>(<font color='#ff0000' weight='1' id='270'></font></font>int) a[i]]</font><font color='#ff0000' weight='1' id='285'></font></font></font>]</font><font color='#ff0000' weight='1' id='289'></font></font> </font>= i;</font>
            </font><font color='#ff0000' weight='1' id='339'><font color='#ff0000' weight='1' id='337'><font color='#ff0000' weight='1' id='326'><font color='#ff0000' weight='1' id='300'>sorted<font color='#ff0000' weight='1' id='299'></font></font><font color='#ff0000' weight='1' id='325'>[<font color='#ff0000' weight='1' id='323'><font color='#ff0000' weight='1' id='320'><font color='#ff0000' weight='1' id='302'>count<font color='#ff0000' weight='1' id='301'></font></font><font color='#ff0000' weight='1' id='319'>[<font color='#ff0000' weight='1' id='317'><font color='#ff0000' weight='1' id='304'>(<font color='#ff0000' weight='1' id='303'></font></font>int) <font color='#ff0000' weight='1' id='316'><font color='#ff0000' weight='1' id='310'>a</font><font color='#ff0000' weight='1' id='315'>[<font color='#ff0000' weight='1' id='313'><font color='#ff0000' weight='1' id='312'>i<font color='#ff0000' weight='1' id='311'></font></font>]</font><font color='#ff0000' weight='1' id='314'></font></font></font>]</font><font color='#ff0000' weight='1' id='318'></font></font></font>++]</font><font color='#ff0000' weight='1' id='324'></font></font> </font>= a[i];</font><font color='#ff0000' weight='1' id='338'></font>            
        }</font><font color='#ff0000' weight='1' id='340'></font></font>
        
        </font><font color='#ff0000' weight='1' id='395'>for <font color='#ff0000' weight='1' id='371'>(<font color='#ff0000' weight='1' id='354'><font color='#ff0000' weight='1' id='352'><font color='#ff0000' weight='1' id='345'><font color='#ff0000' weight='1' id='344'>int<font color='#ff0000' weight='1' id='343'></font></font> </font><font color='#ff0000' weight='1' id='347'>i<font color='#ff0000' weight='1' id='346'></font> </font><font color='#ff0000' weight='1' id='351'>= <font color='#ff0000' weight='1' id='350'><font color='#ff0000' weight='1' id='349'>0<font color='#ff0000' weight='1' id='348'></font></font></font></font>;</font><font color='#ff0000' weight='1' id='353'></font> </font><font color='#ff0000' weight='1' id='363'><font color='#ff0000' weight='1' id='361'><font color='#ff0000' weight='1' id='356'>i<font color='#ff0000' weight='1' id='355'></font> </font>&lt; n;</font> </font><font color='#ff0000' weight='1' id='369'><font color='#ff0000' weight='1' id='368'><font color='#ff0000' weight='1' id='365'>i<font color='#ff0000' weight='1' id='364'></font></font><font color='#ff0000' weight='1' id='367'>++<font color='#ff0000' weight='1' id='366'></font></font></font>)</font><font color='#ff0000' weight='1' id='370'></font> </font><font color='#ff0000' weight='1' id='394'>{
            a[i] = sorted[i];
        }<font color='#ff0000' weight='1' id='393'></font></font>        
        </font><font color='#ff0000' weight='1' id='400'>return <font color='#ff0000' weight='1' id='398'><font color='#ff0000' weight='1' id='397'>order<font color='#ff0000' weight='1' id='396'></font></font>;</font><font color='#ff0000' weight='1' id='399'></font>
    }</font><font color='#ff0000' weight='1' id='401'></font></font>
    
    private static void sort(char[] a, int[] b) {
        assert(a.length == b.length);
        int n = a.length;
        int[] order = sort(a);
        int[] tmp = new int[n];
        for (int i = 0; i &lt; n; i++) {
            tmp[i] = b[order[i]];
        }
        for (int i = 0; i &lt; n; i++) {
            b[i] = tmp[i];
        }        
    }</font>
</pre>
