<pre style='background-color:blue;'>
<font color='blue'>
import java.util.Arrays;

public class HeapSortSelectHeap {

    public enum Heap { MINHEAP, MAXHEAP };

    private Heap heap;

    public HeapSortSelectHeap(Heap heap) {
        this.heap = heap;
    }

    private void swap(int[] list, int i, int j) {
        int temp = list[j];
        list[j] = list[i];
        list[i] = temp;
    }

    private void siftDown(int[] list, int start, int end) {
        switch(heap) {
            case MINHEAP:
                siftDownMin(list, start, end);
                break;
            case MAXHEAP:
                siftDownMax(list, <font color='#ff0000' weight='1' id='241'><font color='#00ff00' weight='0.5' id='240'>start</font></font>, end);
                break;
        }
    }

    private void siftDownMin(int[] list, int start, int end) {
        int root = start;

        while(root * 2 + 1 &lt;= end) {
            int child = root * 2 + 1;
            int swap = root;
            if(list[swap] &gt; list[child]) {
                swap = child;
            }

            if(child + 1 &lt;= end &amp;&amp; list[swap] &gt; list[child + 1]) {
                swap = child + 1;
            }

            if(swap != root) {
                swap(list, root, swap);
                root = swap;
            } else {
                return;
            }
        }
    }



    private void siftDownMax(int[] list, int start, int end) {
        int root = start;

        while(root * 2 + 1 &lt;= end) {
            int child = root * 2 + 1;
            int swap = root;
            if(list[swap] &lt; list[child]) {
                swap = child;
            }

            if(child + 1 &lt;= end &amp;&amp; list[swap] &lt; list[child + 1]) {
                swap = child + 1;
            }

            if(swap != root) {
                swap(list, root, swap);
                root = swap;
            } else {
                return;
            }
        }
    }

    public void heapify(int[] list) {
        int start = (list.length - 2) / 2;
        while(start &gt;= 0) {
            siftDown(list, start, list.length - 1);
            start -= 1;
        }
    }

    public void sort(int[] list) {
        heapify(list);
        int end = list.length - 1;
        while(end &gt; 0) {
            swap(list, end, 0);
            end -= 1;
            siftDown(list, 0, end);
        }
    }

    public static void runList(int[] list, Heap heap) {
        System.out.println("before: " + Arrays.toString(list));
        HeapSortSelectHeap s = new HeapSortSelectHeap(heap);
        s.heapify(list);
        System.out.println("heap: " + Arrays.toString(list));
        s.sort(list);
        System.out.println("after: " + Arrays.toString(list));
    }


}
</font>
</pre>
<pre style='background-color:blue;'>
<font color='blue'>
package PukyungUniv;

import static org.junit.Assert.assertEquals;

import java.util.Arrays;

import org.junit.Test;

public class Sort_HeapSort <font color='#ff0000' weight='1' id='720'>{

    private <font color='#0000ff' weight='3.11876e-05' id='55'>static </font><font color='#0000ff' weight='3.11876e-05' id='57'>int</font> <font color='#0000ff' weight='3.11876e-05' id='60'>getLeftChildIdx</font>(<font color='#0000ff' weight='7.79691e-06' id='62'>int</font> <font color='#0000ff' weight='7.79691e-06' id='65'>parent</font>) {
        <font color='#0000ff' weight='0.000311876' id='90'>return <font color='#0000ff' weight='0.000140344' id='88'><font color='#0000ff' weight='8.66323e-07' id='71'>(</font><font color='#0000ff' weight='8.66323e-07' id='73'>parent </font><font color='#0000ff' weight='8.66323e-07' id='75'>+ </font><font color='#0000ff' weight='8.66323e-07' id='77'>1</font><font color='#0000ff' weight='8.66323e-07' id='79'>) </font><font color='#0000ff' weight='8.66323e-07' id='81'>* </font><font color='#0000ff' weight='8.66323e-07' id='83'>2 </font><font color='#0000ff' weight='8.66323e-07' id='85'>- </font><font color='#0000ff' weight='8.66323e-07' id='87'>1</font>;</font>
    }</font>

    private <font color='#0000ff' weight='3.74252e-05' id='97'>int</font> <font color='#0000ff' weight='3.74252e-05' id='100'>getParentIdx</font>(int <font color='#0000ff' weight='9.35629e-06' id='105'>child</font>) {
        <font color='#0000ff' weight='0.000804641' id='153'>if <font color='#0000ff' weight='4.99002e-05' id='118'>(<font color='#0000ff' weight='1.03959e-06' id='111'>child </font><font color='#0000ff' weight='1.03959e-06' id='113'>&lt; </font><font color='#0000ff' weight='1.03959e-06' id='115'>1</font>)</font><font color='#0000ff' weight='5.61377e-05' id='128'> <font color='#0000ff' weight='4.99002e-05' id='127'>{
            <font color='#0000ff' weight='1.87126e-05' id='125'>return <font color='#0000ff' weight='6.23752e-06' id='123'><font color='#0000ff' weight='7.79691e-07' id='120'>-</font><font color='#0000ff' weight='7.79691e-07' id='122'>1</font>;</font>
        }</font></font> </font><font color='#0000ff' weight='0.000143463' id='152'>else <font color='#0000ff' weight='0.000137226' id='151'>{
            <font color='#0000ff' weight='6.23752e-05' id='149'>return <font color='#0000ff' weight='2.80689e-05' id='147'><font color='#0000ff' weight='1.73265e-07' id='130'>(</font><font color='#0000ff' weight='1.73265e-07' id='132'>child </font><font color='#0000ff' weight='1.73265e-07' id='134'>+ </font><font color='#0000ff' weight='1.73265e-07' id='136'>1</font><font color='#0000ff' weight='1.73265e-07' id='138'>) </font><font color='#0000ff' weight='1.73265e-07' id='140'>/ </font><font color='#0000ff' weight='1.73265e-07' id='142'>2 </font><font color='#0000ff' weight='1.73265e-07' id='144'>- </font><font color='#0000ff' weight='1.73265e-07' id='146'>1</font>;</font>
        }</font></font></font>
    }</font>

    private <font color='#0000ff' weight='3.11876e-05' id='160'>static </font>void <font color='#0000ff' weight='3.11876e-05' id='165'>maxHeapify</font>(int[] <font color='#0000ff' weight='3.89845e-06' id='173'>data</font>, int <font color='#0000ff' weight='3.89845e-06' id='180'>i</font>, int end) {
        int <font color='#0000ff' weight='1.73265e-06' id='196'>leftChild </font>= <font color='#0000ff' weight='1.55938e-05' id='206'><font color='#0000ff' weight='1.38612e-05' id='205'><font color='#0000ff' weight='8.66323e-07' id='198'>getLeftChildIdx</font><font color='#0000ff' weight='4.33161e-06' id='204'>(<font color='#0000ff' weight='1.29948e-06' id='202'><font color='#0000ff' weight='8.66323e-07' id='201'><font color='#0000ff' weight='4.33161e-07' id='200'>i</font></font>)</font></font></font></font>;
        <font color='#0001ff' weight='0.00168413' id='373'>while (<font color='#0000ff' weight='8.66323e-07' id='212'>leftChild </font>&lt;= end) <font color='#0000ff' weight='0.000790087' id='372'>{
            int <font color='#0000ff' weight='1.85641e-07' id='224'>largeChild</font>;
            <font color='#0000ff' weight='5.19794e-05' id='298'>if (<font color='#0000ff' weight='7.42563e-07' id='234'><font color='#0000ff' weight='4.12535e-08' id='229'>leftChild </font><font color='#0000ff' weight='4.12535e-08' id='231'>== </font><font color='#0000ff' weight='4.12535e-08' id='233'>end</font>)</font> {
                <font color='#0000ff' weight='2.06267e-08' id='238'>largeChild </font>= <font color='#0000ff' weight='2.06267e-08' id='242'>leftChild</font>;
            } <font color='#0000ff' weight='1.1881e-05' id='297'>else <font color='#0000ff' weight='1.16335e-05' id='296'>{
                <font color='#0000ff' weight='5.56922e-06' id='294'><font color='#0000ff' weight='2.66085e-06' id='292'><font color='#0000ff' weight='2.06267e-08' id='250'>largeChild </font><font color='#0000ff' weight='2.06267e-08' id='252'>= </font><font color='#0000ff' weight='7.83816e-07' id='291'><font color='#0000ff' weight='1.65014e-07' id='277'><font color='#0000ff' weight='7.56314e-08' id='275'><font color='#0000ff' weight='5.72965e-10' id='254'>data</font>[<font color='#0000ff' weight='2.86482e-10' id='256'>leftChild</font>] &gt; <font color='#0000ff' weight='5.72965e-10' id='264'>data</font>[<font color='#0000ff' weight='9.54941e-11' id='266'>leftChild </font>+ 1] ?</font></font><font color='#0000ff' weight='2.75023e-08' id='282'> <font color='#0000ff' weight='6.87558e-09' id='280'><font color='#0000ff' weight='3.43779e-09' id='279'>leftChild</font> </font></font><font color='#0000ff' weight='4.8129e-08' id='290'>: <font color='#0000ff' weight='4.12535e-08' id='289'><font color='#0000ff' weight='2.29186e-09' id='284'>leftChild </font>+ 1</font></font></font>;</font>
            }</font></font></font>
            </font><font color='#0000ff' weight='1.93066e-05' id='325'>if (<font color='#0000ff' weight='4.33161e-07' id='306'><font color='#0000ff' weight='3.09401e-08' id='300'>data</font><font color='#0000ff' weight='1.2376e-07' id='305'>[<font color='#0000ff' weight='3.09401e-08' id='303'><font color='#0000ff' weight='1.54701e-08' id='302'>i</font>]</font></font> </font><font color='#0000ff' weight='6.18802e-08' id='308'>&gt;= </font><font color='#0000ff' weight='4.33161e-07' id='316'><font color='#0000ff' weight='3.09401e-08' id='310'>data</font><font color='#0000ff' weight='1.2376e-07' id='315'>[<font color='#0000ff' weight='3.09401e-08' id='313'><font color='#0000ff' weight='1.54701e-08' id='312'>largeChild</font>]</font></font></font>)<font color='#0000ff' weight='1.48512e-06' id='324'> <font color='#0000ff' weight='1.11384e-06' id='323'>{
                <font color='#0000ff' weight='1.85641e-07' id='321'>return;
            }</font></font></font>
            </font>swap(<font color='#0000ff' weight='4.64102e-08' id='329'>data</font>, <font color='#0000ff' weight='4.64102e-08' id='333'>i</font>, <font color='#0000ff' weight='4.64102e-08' id='337'>largeChild</font>);
            <font color='#0000ff' weight='1.2376e-07' id='347'>i </font>= <font color='#0000ff' weight='1.2376e-07' id='351'>largeChild</font>;
            <font color='#0000ff' weight='1.11384e-05' id='370'><font color='#0000ff' weight='4.82666e-06' id='368'><font color='#0000ff' weight='1.2376e-07' id='356'>leftChild </font><font color='#0000ff' weight='1.2376e-07' id='358'>= </font><font color='#0000ff' weight='9.90083e-07' id='367'><font color='#0000ff' weight='6.18802e-08' id='360'>getLeftChildIdx</font><font color='#0000ff' weight='3.09401e-07' id='366'>(<font color='#0000ff' weight='9.28203e-08' id='364'><font color='#0000ff' weight='6.18802e-08' id='363'><font color='#0000ff' weight='3.09401e-08' id='362'>i</font></font>)</font></font></font>;</font>
        }</font></font>
    }</font>

    <font color='#0011ff' weight='0.0170284' id='468'>private <font color='#0000ff' weight='3.11876e-05' id='380'>static </font>void <font color='#0000ff' weight='3.11876e-05' id='385'>swap</font>(int[] <font color='#0000ff' weight='3.89845e-06' id='393'>data</font>, int <font color='#0000ff' weight='3.89845e-06' id='400'>i</font>, int <font color='#0000ff' weight='3.89845e-06' id='407'>j</font>) <font color='#0001ff' weight='0.00171532' id='467'>{
        int <font color='#0000ff' weight='1.29948e-06' id='416'>t </font>= <font color='#0000ff' weight='9.09639e-06' id='424'><font color='#0000ff' weight='6.49742e-07' id='418'>data</font><font color='#0000ff' weight='2.59897e-06' id='423'>[<font color='#0000ff' weight='6.49742e-07' id='421'><font color='#0000ff' weight='3.24871e-07' id='420'>i</font>]</font></font></font>;
        <font color='#0000ff' weight='0.000155938' id='450'><font color='#0000ff' weight='7.01722e-05' id='448'><font color='#0000ff' weight='6.49742e-07' id='431'>data</font>[<font color='#0000ff' weight='3.24871e-07' id='433'>i</font>] <font color='#0000ff' weight='1.29948e-06' id='439'>= </font><font color='#0000ff' weight='6.49742e-07' id='441'>data</font>[<font color='#0000ff' weight='3.24871e-07' id='443'>j</font>];</font>
        </font><font color='#0000ff' weight='0.000109157' id='465'><font color='#0000ff' weight='4.67814e-05' id='463'><font color='#0000ff' weight='6.49742e-07' id='452'>data</font>[<font color='#0000ff' weight='3.24871e-07' id='454'>j</font>] <font color='#0000ff' weight='1.29948e-06' id='460'>= </font><font color='#0000ff' weight='1.29948e-06' id='462'>t</font>;</font>
    }</font></font>

    </font><font color='#0008ff' weight='0.00879491' id='516'><font color='#0000ff' weight='3.11876e-05' id='470'>public </font><font color='#0000ff' weight='3.11876e-05' id='472'>static </font><font color='#0000ff' weight='6.23752e-05' id='475'><font color='#0000ff' weight='3.11876e-05' id='474'>void</font> </font><font color='#0000ff' weight='3.11876e-05' id='477'>sort</font><font color='#0000ff' weight='0.000343064' id='489'>(<font color='#0000ff' weight='0.000140344' id='487'><font color='#0000ff' weight='0.00012475' id='486'><font color='#0000ff' weight='3.89845e-05' id='483'><font color='#0000ff' weight='3.11876e-05' id='482'><font color='#0000ff' weight='3.89845e-06' id='479'>int</font><font color='#0000ff' weight='3.89845e-06' id='481'>[]</font></font> </font><font color='#0000ff' weight='7.79691e-06' id='485'>data</font></font>)</font> </font><font color='#0000ff' weight='0.000779691' id='515'>{
        <font color='#0000ff' weight='2.59897e-06' id='491'>makeHeap</font>(<font color='#0000ff' weight='1.29948e-06' id='493'>data</font>);
        <font color='#0000ff' weight='4.15835e-05' id='510'><font color='#0000ff' weight='2.59897e-06' id='503'>sortFromHeap</font><font color='#0000ff' weight='1.29948e-05' id='509'>(<font color='#0000ff' weight='3.89845e-06' id='507'><font color='#0000ff' weight='2.59897e-06' id='506'><font color='#0000ff' weight='1.29948e-06' id='505'>data</font></font>)</font></font></font>;
    }</font>

    </font><font color='#0012ff' weight='0.0181512' id='614'><font color='#0000ff' weight='3.11876e-05' id='518'>private </font><font color='#0000ff' weight='3.11876e-05' id='520'>static </font>void <font color='#0000ff' weight='3.11876e-05' id='525'>makeHeap</font>(int[] <font color='#0000ff' weight='7.79691e-06' id='533'>data</font>) {
        <font color='#0001ff' weight='0.00113835' id='611'>for <font color='#0000ff' weight='0.000319673' id='579'>(<font color='#0000ff' weight='4.67814e-05' id='562'><font color='#0000ff' weight='2.14415e-05' id='560'>int <font color='#0000ff' weight='3.24871e-07' id='542'>i </font>= <font color='#0000ff' weight='2.16581e-08' id='544'>data</font>.length <font color='#0000ff' weight='6.49742e-08' id='551'>/ </font>2 <font color='#0000ff' weight='6.49742e-08' id='555'>- </font><font color='#0000ff' weight='6.49742e-08' id='557'>1</font>;</font> </font><font color='#0000ff' weight='1.55938e-05' id='571'><font color='#0000ff' weight='3.24871e-07' id='564'>i </font>&gt;= 0; </font><font color='#0000ff' weight='9.74613e-06' id='577'><font color='#0000ff' weight='7.79691e-06' id='576'><font color='#0000ff' weight='9.74613e-07' id='573'>i</font><font color='#0000ff' weight='9.74613e-07' id='575'>--</font></font>)</font> </font><font color='#0000ff' weight='0.000233907' id='610'>{
            <font color='#0000ff' weight='9.74613e-07' id='581'>maxHeapify</font>(<font color='#0000ff' weight='2.43653e-07' id='583'>data</font>, <font color='#0000ff' weight='2.43653e-07' id='587'>i</font>, <font color='#0000ff' weight='2.70726e-08' id='591'>data</font>.length - 1);
        }</font>
    }</font>

    </font><font color='#0000ff' weight='3.11876e-05' id='616'>private </font><font color='#0000ff' weight='3.11876e-05' id='618'>static </font>void <font color='#0000ff' weight='3.11876e-05' id='623'>sortFromHeap</font>(int[] <font color='#0000ff' weight='7.79691e-06' id='631'>data</font>) {
        int <font color='#0000ff' weight='1.73265e-06' id='640'>last </font>= <font color='#0000ff' weight='1.92516e-07' id='642'>data</font>.length - 1;
        <font color='#0000ff' weight='0.000602961' id='715'>while (<font color='#0000ff' weight='8.66323e-07' id='658'>last </font>&gt; 0) {
            swap(<font color='#0000ff' weight='8.12178e-08' id='669'>data</font>, <font color='#0000ff' weight='8.12178e-08' id='673'>0</font>, <font color='#0000ff' weight='8.12178e-08' id='677'>last</font>);
            <font color='#0000ff' weight='3.24871e-07' id='687'>last</font><font color='#0000ff' weight='3.24871e-07' id='689'>--</font>;
            <font color='#0000ff' weight='3.24871e-07' id='694'>maxHeapify</font>(<font color='#0000ff' weight='8.12178e-08' id='696'>data</font>, 0, <font color='#0000ff' weight='8.12178e-08' id='704'>last</font>);
        }
    }</font>

}</font>
</font>
</pre>
