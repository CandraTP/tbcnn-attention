<pre style='background-color:blue;'>
<font color='blue'>
  private static void merge(Comparable[] a, Comparable[] aux, int lo, int mid, int hi) {

        
        assert isSorted(a, lo, mid);
        assert isSorted(a, mid+1, hi);

        
        for (int k = lo; k &lt;= hi; k++) {
            aux[k] = a[k]; 
        }

        
        int i = lo, j = mid+1;
        for (int k = lo; k &lt;= hi; k++) {
            if      (i &gt; mid)              a[k] = aux[j++];   
            else if (j &gt; hi)               a[k] = aux[i++];
            else if (<font color='#ff2800' weight='0.96' id='297'><font color='#0014ff' weight='0.02' id='274'>less</font><font color='#00ff51' weight='0.42' id='296'>(<font color='#003dff' weight='0.06' id='284'><font color='#0036ff' weight='0.0533333' id='283'><font color='#002fff' weight='0.0466667' id='282'><font color='#0003ff' weight='0.00333333' id='276'>aux</font>[<font color='#0001ff' weight='0.00166667' id='278'>j</font>]</font></font>, </font><font color='#003dff' weight='0.06' id='294'><font color='#0036ff' weight='0.0533333' id='293'><font color='#002fff' weight='0.0466667' id='292'><font color='#0003ff' weight='0.00333333' id='286'>aux</font><font color='#000dff' weight='0.0133333' id='291'>[<font color='#0001ff' weight='0.00166667' id='288'>i</font>]</font></font></font>)</font></font></font>) a[k] = aux[j++];
            else                           a[k] = aux[i++];
        }

        
        assert isSorted(a, lo, hi);
    }

    
    private static void sort(Comparable[] a, Comparable[] aux, int lo, int hi) {
        if (hi &lt;= lo) return;
        int mid = lo + (hi - lo) / 2;
        sort(a, aux, lo, mid);
        sort(a, aux, mid + 1, hi);
        merge(a, aux, lo, mid, hi);
    }

    
    public static void sort(Comparable[] a) {
        Comparable[] aux = new Comparable[a.length];
        sort(a, aux, 0, a.length-1);
        assert isSorted(a);
    }
</font>
</pre>
<pre style='background-color:blue;'>
<font color='blue'>

    public static void buildheap(int []a){
        n=a.length-1;
        for(int i=n/2;i&gt;=0;i--){
            maxheap(a,i);
        }
    }
    
    public static void maxheap(int[] a, int i){ 
        left=2*i;
        right=2*i+1;
        if(left &lt;= n &amp;&amp; a[left] &gt; a[i]){
            largest=left;
        }
        else{
            largest=i;
        }
        
        if(<font color='#00ff24' weight='0.464286' id='233'><font color='#0002ff' weight='0.00255102' id='208'>right </font><font color='#0002ff' weight='0.00255102' id='210'>&lt;= </font><font color='#0002ff' weight='0.00255102' id='212'>n </font><font color='#0002ff' weight='0.00255102' id='214'>&amp;&amp; </font><font color='#0001ff' weight='0.00127551' id='216'>a</font>[<font color='#0000ff' weight='0.000637755' id='218'>right</font>] <font color='#0002ff' weight='0.00255102' id='224'>&gt; </font><font color='#0001ff' weight='0.00127551' id='226'>a</font>[<font color='#0000ff' weight='0.000637755' id='228'>largest</font>])</font>{
            largest=right;
        }
        if(largest!=i){
            exchange(i,largest);
            maxheap(a, largest);
        }
    }
    
    public static void exchange(int i, int j){
        int t=a[i];
        a[i]=a[j];
        a[j]=t; 
        }
    
    public static void sort(int []a0){
        a=a0;
        buildheap(a);
        
        for(int i=n;i&gt;0;i--){
            exchange(0, i);
            n=n-1;
            maxheap(a, 0);
        }
    }</font>
</pre>
