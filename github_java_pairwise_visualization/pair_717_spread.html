<pre style='background-color:blue;'>
<font color='blue'>
import java.util.Arrays;

public class HeapSortSelectHeap {

    public enum Heap { MINHEAP, MAXHEAP };

    private Heap heap;

    public HeapSortSelectHeap(Heap heap) {
        this.heap = heap;
    }

    private void swap(int[] list, int i, int j) {
        int temp = list[j];
        list[j] = list[i];
        list[i] = temp;
    }

    private void siftDown(int[] list, int start, int end) {
        switch(heap) {
            case MINHEAP:
                siftDownMin(list, start, end);
                break;
            case MAXHEAP:
                siftDownMax(list, <font color='#ff0000' weight='1' id='241'><font color='#ff0000' weight='1' id='240'>start<font color='#ff0000' weight='1' id='239'></font></font></font>, end);
                break;
        }
    }

    private void siftDownMin(int[] list, int start, int end) {
        int root = start;

        while(root * 2 + 1 &lt;= end) {
            int child = root * 2 + 1;
            int swap = root;
            if(list[swap] &gt; list[child]) {
                swap = child;
            }

            if(child + 1 &lt;= end &amp;&amp; list[swap] &gt; list[child + 1]) {
                swap = child + 1;
            }

            if(swap != root) {
                swap(list, root, swap);
                root = swap;
            } else {
                return;
            }
        }
    }



    private void siftDownMax(int[] list, int start, int end) {
        int root = start;

        while(root * 2 + 1 &lt;= end) {
            int child = root * 2 + 1;
            int swap = root;
            if(list[swap] &lt; list[child]) {
                swap = child;
            }

            if(child + 1 &lt;= end &amp;&amp; list[swap] &lt; list[child + 1]) {
                swap = child + 1;
            }

            if(swap != root) {
                swap(list, root, swap);
                root = swap;
            } else {
                return;
            }
        }
    }

    public void heapify(int[] list) {
        int start = (list.length - 2) / 2;
        while(start &gt;= 0) {
            siftDown(list, start, list.length - 1);
            start -= 1;
        }
    }

    public void sort(int[] list) {
        heapify(list);
        int end = list.length - 1;
        while(end &gt; 0) {
            swap(list, end, 0);
            end -= 1;
            siftDown(list, 0, end);
        }
    }

    public static void runList(int[] list, Heap heap) {
        System.out.println("before: " + Arrays.toString(list));
        HeapSortSelectHeap s = new HeapSortSelectHeap(heap);
        s.heapify(list);
        System.out.println("heap: " + Arrays.toString(list));
        s.sort(list);
        System.out.println("after: " + Arrays.toString(list));
    }


}
</font>
</pre>
<pre style='background-color:blue;'>
<font color='blue'>
package PukyungUniv;

import static org.junit.Assert.assertEquals;

import java.util.Arrays;

import org.junit.Test;

public class Sort_HeapSort <font color='#ff0000' weight='1' id='720'>{

    private <font color='#0015ff' weight='0.0208333' id='55'>static<font color='#0015ff' weight='0.0208333' id='54'></font> </font><font color='#0015ff' weight='0.0208333' id='57'>int</font> <font color='#0015ff' weight='0.0208333' id='60'>getLeftChildIdx</font>(<font color='#0005ff' weight='0.00520833' id='62'>int</font> <font color='#0005ff' weight='0.00520833' id='65'>parent</font>)<font color='#000aff' weight='0.0104167' id='68'></font> {
        <font color='#000aff' weight='0.0104167' id='90'>return <font color='#0005ff' weight='0.00520833' id='88'><font color='#0000ff' weight='0.000578704' id='71'>(<font color='#0000ff' weight='0.000578704' id='70'></font></font><font color='#0000ff' weight='0.000578704' id='73'>parent </font><font color='#0000ff' weight='0.000578704' id='75'>+<font color='#0000ff' weight='0.000578704' id='74'></font> </font><font color='#0000ff' weight='0.000578704' id='77'>1<font color='#0000ff' weight='0.000578704' id='76'></font></font><font color='#0000ff' weight='0.000578704' id='79'>)<font color='#0000ff' weight='0.000578704' id='78'></font> </font><font color='#0000ff' weight='0.000578704' id='81'>* </font><font color='#0000ff' weight='0.000578704' id='83'>2<font color='#0000ff' weight='0.000578704' id='82'></font> </font><font color='#0000ff' weight='0.000578704' id='85'>- </font><font color='#0000ff' weight='0.000578704' id='87'>1<font color='#0000ff' weight='0.000578704' id='86'></font></font>;</font><font color='#0005ff' weight='0.00520833' id='89'></font>
    }</font>

    private <font color='#0019ff' weight='0.025' id='97'>int</font> <font color='#0019ff' weight='0.025' id='100'>getParentIdx</font>(int <font color='#0006ff' weight='0.00625' id='105'>child</font>) {
        <font color='#000cff' weight='0.0125' id='153'>if <font color='#0004ff' weight='0.00416667' id='118'>(<font color='#0000ff' weight='0.000694444' id='111'>child </font><font color='#0000ff' weight='0.000694444' id='113'>&lt;<font color='#0000ff' weight='0.000694444' id='112'></font> </font><font color='#0000ff' weight='0.000694444' id='115'>1<font color='#0000ff' weight='0.000694444' id='114'></font></font>)</font><font color='#0004ff' weight='0.00416667' id='128'> <font color='#0004ff' weight='0.00416667' id='127'>{
            <font color='#0002ff' weight='0.00208333' id='125'>return <font color='#0001ff' weight='0.00104167' id='123'><font color='#0000ff' weight='0.000520833' id='120'>-<font color='#0000ff' weight='0.000520833' id='119'></font></font><font color='#0000ff' weight='0.000520833' id='122'>1<font color='#0000ff' weight='0.000520833' id='121'></font></font>;</font><font color='#0001ff' weight='0.00104167' id='124'></font>
        }</font><font color='#0002ff' weight='0.00208333' id='126'></font></font> </font><font color='#0004ff' weight='0.00416667' id='152'>else <font color='#0004ff' weight='0.00416667' id='151'>{
            <font color='#0002ff' weight='0.00208333' id='149'>return <font color='#0001ff' weight='0.00104167' id='147'><font color='#0000ff' weight='0.000115741' id='130'>(<font color='#0000ff' weight='0.000115741' id='129'></font></font><font color='#0000ff' weight='0.000115741' id='132'>child </font><font color='#0000ff' weight='0.000115741' id='134'>+<font color='#0000ff' weight='0.000115741' id='133'></font> </font><font color='#0000ff' weight='0.000115741' id='136'>1<font color='#0000ff' weight='0.000115741' id='135'></font></font><font color='#0000ff' weight='0.000115741' id='138'>)<font color='#0000ff' weight='0.000115741' id='137'></font> </font><font color='#0000ff' weight='0.000115741' id='140'>/<font color='#0000ff' weight='0.000115741' id='139'></font> </font><font color='#0000ff' weight='0.000115741' id='142'>2<font color='#0000ff' weight='0.000115741' id='141'></font> </font><font color='#0000ff' weight='0.000115741' id='144'>-<font color='#0000ff' weight='0.000115741' id='143'></font> </font><font color='#0000ff' weight='0.000115741' id='146'>1<font color='#0000ff' weight='0.000115741' id='145'></font></font>;</font><font color='#0001ff' weight='0.00104167' id='148'></font>
        }</font><font color='#0002ff' weight='0.00208333' id='150'></font></font></font>
    }</font><font color='#000cff' weight='0.0125' id='154'></font>

    private <font color='#0015ff' weight='0.0208333' id='160'>static<font color='#0015ff' weight='0.0208333' id='159'></font> </font>void <font color='#0015ff' weight='0.0208333' id='165'>maxHeapify</font>(int[] <font color='#0002ff' weight='0.00260417' id='173'>data</font>, int <font color='#0002ff' weight='0.00260417' id='180'>i</font>, int end) {
        int <font color='#0001ff' weight='0.00115741' id='196'>leftChild </font>= <font color='#0001ff' weight='0.00115741' id='206'><font color='#0001ff' weight='0.00115741' id='205'><font color='#0000ff' weight='0.000578704' id='198'>getLeftChildIdx<font color='#0000ff' weight='0.000578704' id='197'></font></font><font color='#0000ff' weight='0.000578704' id='204'>(<font color='#0000ff' weight='0.000289352' id='202'><font color='#0000ff' weight='0.000289352' id='201'><font color='#0000ff' weight='0.000289352' id='200'>i</font></font>)</font><font color='#0000ff' weight='0.000289352' id='203'></font></font></font></font>;
        <font color='#0007ff' weight='0.00694444' id='373'>while (<font color='#0000ff' weight='0.000578704' id='212'>leftChild </font>&lt;= end) <font color='#0003ff' weight='0.00347222' id='372'>{
            int <font color='#0000ff' weight='0.000124008' id='224'>largeChild</font>;
            <font color='#0000ff' weight='0.000496032' id='298'>if (<font color='#0000ff' weight='8.2672e-05' id='234'><font color='#0000ff' weight='2.75573e-05' id='229'>leftChild </font><font color='#0000ff' weight='2.75573e-05' id='231'>== </font><font color='#0000ff' weight='2.75573e-05' id='233'>end</font>)</font> {
                <font color='#0000ff' weight='1.37787e-05' id='238'>largeChild </font>= <font color='#0000ff' weight='1.37787e-05' id='242'>leftChild</font>;
            } <font color='#0000ff' weight='0.000165344' id='297'>else <font color='#0000ff' weight='0.000165344' id='296'>{
                <font color='#0000ff' weight='8.2672e-05' id='294'><font color='#0000ff' weight='4.1336e-05' id='292'><font color='#0000ff' weight='1.37787e-05' id='250'>largeChild </font><font color='#0000ff' weight='1.37787e-05' id='252'>= </font><font color='#0000ff' weight='1.37787e-05' id='291'><font color='#0000ff' weight='4.59289e-06' id='277'><font color='#0000ff' weight='2.29644e-06' id='275'><font color='#0000ff' weight='3.82741e-07' id='254'>data</font>[<font color='#0000ff' weight='1.9137e-07' id='256'>leftChild</font>] &gt; <font color='#0000ff' weight='3.82741e-07' id='264'>data</font>[<font color='#0000ff' weight='6.37901e-08' id='266'>leftChild </font>+ 1] ?</font></font><font color='#0000ff' weight='4.59289e-06' id='282'> <font color='#0000ff' weight='2.29644e-06' id='280'><font color='#0000ff' weight='2.29644e-06' id='279'>leftChild</font> </font><font color='#0000ff' weight='2.29644e-06' id='281'></font></font><font color='#0000ff' weight='4.59289e-06' id='290'>: <font color='#0000ff' weight='4.59289e-06' id='289'><font color='#0000ff' weight='1.53096e-06' id='284'>leftChild </font>+ 1</font></font></font>;</font>
            }</font></font></font>
            </font><font color='#0000ff' weight='0.000496032' id='325'>if (<font color='#0000ff' weight='4.1336e-05' id='306'><font color='#0000ff' weight='2.0668e-05' id='300'>data</font><font color='#0000ff' weight='2.0668e-05' id='305'>[<font color='#0000ff' weight='1.0334e-05' id='303'><font color='#0000ff' weight='1.0334e-05' id='302'>i<font color='#0000ff' weight='1.0334e-05' id='301'></font></font>]</font><font color='#0000ff' weight='1.0334e-05' id='304'></font></font> </font><font color='#0000ff' weight='4.1336e-05' id='308'>&gt;= </font><font color='#0000ff' weight='4.1336e-05' id='316'><font color='#0000ff' weight='2.0668e-05' id='310'>data</font><font color='#0000ff' weight='2.0668e-05' id='315'>[<font color='#0000ff' weight='1.0334e-05' id='313'><font color='#0000ff' weight='1.0334e-05' id='312'>largeChild<font color='#0000ff' weight='1.0334e-05' id='311'></font></font>]</font><font color='#0000ff' weight='1.0334e-05' id='314'></font></font></font>)<font color='#0000ff' weight='0.000248016' id='324'> <font color='#0000ff' weight='0.000248016' id='323'>{
                <font color='#0000ff' weight='0.000124008' id='321'>return;<font color='#0000ff' weight='0.000124008' id='320'></font>
            }</font><font color='#0000ff' weight='0.000124008' id='322'></font></font></font>
            </font>swap(<font color='#0000ff' weight='3.1002e-05' id='329'>data</font>, <font color='#0000ff' weight='3.1002e-05' id='333'>i</font>, <font color='#0000ff' weight='3.1002e-05' id='337'>largeChild</font>);
            <font color='#0000ff' weight='8.2672e-05' id='347'>i </font>= <font color='#0000ff' weight='8.2672e-05' id='351'>largeChild</font>;
            <font color='#0000ff' weight='0.000496032' id='370'><font color='#0000ff' weight='0.000248016' id='368'><font color='#0000ff' weight='8.2672e-05' id='356'>leftChild<font color='#0000ff' weight='8.2672e-05' id='355'></font> </font><font color='#0000ff' weight='8.2672e-05' id='358'>=<font color='#0000ff' weight='8.2672e-05' id='357'></font> </font><font color='#0000ff' weight='8.2672e-05' id='367'><font color='#0000ff' weight='4.1336e-05' id='360'>getLeftChildIdx<font color='#0000ff' weight='4.1336e-05' id='359'></font></font><font color='#0000ff' weight='4.1336e-05' id='366'>(<font color='#0000ff' weight='2.0668e-05' id='364'><font color='#0000ff' weight='2.0668e-05' id='363'><font color='#0000ff' weight='2.0668e-05' id='362'>i<font color='#0000ff' weight='2.0668e-05' id='361'></font></font></font>)</font><font color='#0000ff' weight='2.0668e-05' id='365'></font></font></font>;</font><font color='#0000ff' weight='0.000248016' id='369'></font>
        }</font><font color='#0000ff' weight='0.000496032' id='371'></font></font>
    }</font>

    <font color='#007fff' weight='0.125' id='468'>private <font color='#0015ff' weight='0.0208333' id='380'>static<font color='#0015ff' weight='0.0208333' id='379'></font> </font>void <font color='#0015ff' weight='0.0208333' id='385'>swap</font>(int[] <font color='#0002ff' weight='0.00260417' id='393'>data</font>, int <font color='#0002ff' weight='0.00260417' id='400'>i</font>, int <font color='#0002ff' weight='0.00260417' id='407'>j</font>) <font color='#0015ff' weight='0.0208333' id='467'>{
        int <font color='#0000ff' weight='0.000868056' id='416'>t </font>= <font color='#0000ff' weight='0.000868056' id='424'><font color='#0000ff' weight='0.000434028' id='418'>data</font><font color='#0000ff' weight='0.000434028' id='423'>[<font color='#0000ff' weight='0.000217014' id='421'><font color='#0000ff' weight='0.000217014' id='420'>i<font color='#0000ff' weight='0.000217014' id='419'></font></font>]</font><font color='#0000ff' weight='0.000217014' id='422'></font></font></font>;
        <font color='#0005ff' weight='0.00520833' id='450'><font color='#0002ff' weight='0.00260417' id='448'><font color='#0000ff' weight='0.000434028' id='431'>data</font>[<font color='#0000ff' weight='0.000217014' id='433'>i</font>] <font color='#0000ff' weight='0.000868056' id='439'>= </font><font color='#0000ff' weight='0.000434028' id='441'>data</font>[<font color='#0000ff' weight='0.000217014' id='443'>j</font>];</font><font color='#0002ff' weight='0.00260417' id='449'></font>
        </font><font color='#0005ff' weight='0.00520833' id='465'><font color='#0002ff' weight='0.00260417' id='463'><font color='#0000ff' weight='0.000434028' id='452'>data</font>[<font color='#0000ff' weight='0.000217014' id='454'>j</font>] <font color='#0000ff' weight='0.000868056' id='460'>= </font><font color='#0000ff' weight='0.000868056' id='462'>t</font>;</font><font color='#0002ff' weight='0.00260417' id='464'></font>
    }</font><font color='#0005ff' weight='0.00520833' id='466'></font></font>

    </font><font color='#007fff' weight='0.125' id='516'><font color='#0015ff' weight='0.0208333' id='470'>public<font color='#0015ff' weight='0.0208333' id='469'></font> </font><font color='#0015ff' weight='0.0208333' id='472'>static<font color='#0015ff' weight='0.0208333' id='471'></font> </font><font color='#0015ff' weight='0.0208333' id='475'><font color='#0015ff' weight='0.0208333' id='474'>void</font> </font><font color='#0015ff' weight='0.0208333' id='477'>sort</font><font color='#0015ff' weight='0.0208333' id='489'>(<font color='#000aff' weight='0.0104167' id='487'><font color='#000aff' weight='0.0104167' id='486'><font color='#0005ff' weight='0.00520833' id='483'><font color='#0005ff' weight='0.00520833' id='482'><font color='#0002ff' weight='0.00260417' id='479'>int</font><font color='#0002ff' weight='0.00260417' id='481'>[]<font color='#0002ff' weight='0.00260417' id='480'></font></font></font> </font><font color='#0005ff' weight='0.00520833' id='485'>data</font></font>)</font><font color='#000aff' weight='0.0104167' id='488'></font> </font><font color='#0015ff' weight='0.0208333' id='515'>{
        <font color='#0001ff' weight='0.00173611' id='491'>makeHeap</font>(<font color='#0000ff' weight='0.000868056' id='493'>data</font>)<font color='#0000ff' weight='0.000868056' id='496'></font>;
        <font color='#0003ff' weight='0.00347222' id='510'><font color='#0001ff' weight='0.00173611' id='503'>sortFromHeap</font><font color='#0001ff' weight='0.00173611' id='509'>(<font color='#0000ff' weight='0.000868056' id='507'><font color='#0000ff' weight='0.000868056' id='506'><font color='#0000ff' weight='0.000868056' id='505'>data<font color='#0000ff' weight='0.000868056' id='504'></font></font></font>)</font><font color='#0000ff' weight='0.000868056' id='508'></font></font></font>;
    }</font>

    </font><font color='#007fff' weight='0.125' id='614'><font color='#0015ff' weight='0.0208333' id='518'>private<font color='#0015ff' weight='0.0208333' id='517'></font> </font><font color='#0015ff' weight='0.0208333' id='520'>static </font>void <font color='#0015ff' weight='0.0208333' id='525'>makeHeap</font>(int[] <font color='#0005ff' weight='0.00520833' id='533'>data</font>) {
        <font color='#000aff' weight='0.0104167' id='611'>for <font color='#0005ff' weight='0.00520833' id='579'>(<font color='#0001ff' weight='0.00130208' id='562'><font color='#0000ff' weight='0.000651042' id='560'>int <font color='#0000ff' weight='0.000217014' id='542'>i </font>= <font color='#0000ff' weight='1.44676e-05' id='544'>data</font>.length <font color='#0000ff' weight='4.34028e-05' id='551'>/ </font>2 <font color='#0000ff' weight='4.34028e-05' id='555'>- </font><font color='#0000ff' weight='4.34028e-05' id='557'>1</font>;</font><font color='#0000ff' weight='0.000651042' id='561'></font> </font><font color='#0001ff' weight='0.00130208' id='571'><font color='#0000ff' weight='0.000217014' id='564'>i </font>&gt;= 0; </font><font color='#0001ff' weight='0.00130208' id='577'><font color='#0001ff' weight='0.00130208' id='576'><font color='#0000ff' weight='0.000651042' id='573'>i<font color='#0000ff' weight='0.000651042' id='572'></font></font><font color='#0000ff' weight='0.000651042' id='575'>--<font color='#0000ff' weight='0.000651042' id='574'></font></font></font>)</font><font color='#0001ff' weight='0.00130208' id='578'></font> </font><font color='#0005ff' weight='0.00520833' id='610'>{
            <font color='#0000ff' weight='0.000651042' id='581'>maxHeapify</font>(<font color='#0000ff' weight='0.00016276' id='583'>data</font>, <font color='#0000ff' weight='0.00016276' id='587'>i</font>, <font color='#0000ff' weight='1.80845e-05' id='591'>data</font>.length - 1);
        }<font color='#0002ff' weight='0.00260417' id='609'></font></font>
    }</font>

    </font><font color='#0015ff' weight='0.0208333' id='616'>private<font color='#0015ff' weight='0.0208333' id='615'></font> </font><font color='#0015ff' weight='0.0208333' id='618'>static </font>void <font color='#0015ff' weight='0.0208333' id='623'>sortFromHeap</font>(int[] <font color='#0005ff' weight='0.00520833' id='631'>data</font>) {
        int <font color='#0001ff' weight='0.00115741' id='640'>last </font>= <font color='#0000ff' weight='0.000128601' id='642'>data</font>.length - 1;
        <font color='#0007ff' weight='0.00694444' id='715'>while (<font color='#0000ff' weight='0.000578704' id='658'>last </font>&gt; 0) {
            swap(<font color='#0000ff' weight='5.42535e-05' id='669'>data</font>, <font color='#0000ff' weight='5.42535e-05' id='673'>0<font color='#0000ff' weight='5.42535e-05' id='672'></font></font>, <font color='#0000ff' weight='5.42535e-05' id='677'>last<font color='#0000ff' weight='5.42535e-05' id='676'></font></font>);
            <font color='#0000ff' weight='0.000217014' id='687'>last</font><font color='#0000ff' weight='0.000217014' id='689'>--</font>;
            <font color='#0000ff' weight='0.000217014' id='694'>maxHeapify</font>(<font color='#0000ff' weight='5.42535e-05' id='696'>data</font>, 0, <font color='#0000ff' weight='5.42535e-05' id='704'>last</font>);
        }
    }</font>

}<font color='#007fff' weight='0.125' id='719'></font></font>
</font>
</pre>
