<pre style='background-color:blue;'>
<font color='blue'>
import java.util.Arrays;

public class HeapSortSelectHeap {

    public enum Heap { MINHEAP, MAXHEAP };

    private Heap heap;

    public HeapSortSelectHeap(Heap heap) {
        this.heap = heap;
    }

    private void swap(int[] list, int i, int j) {
        int temp = list[j];
        list[j] = list[i];
        list[i] = temp;
    }

    private void siftDown(int[] list, int start, int end) {
        switch(heap) {
            case MINHEAP:
                siftDownMin(list, start, end);
                break;
            case MAXHEAP:
                siftDownMax(list, <font color='#ff0000' weight='1' id='241'><font color='#ff0000' weight='1' id='240'>start<font color='#ff0000' weight='1' id='239'></font></font></font>, end);
                break;
        }
    }

    private void siftDownMin(int[] list, int start, int end) {
        int root = start;

        while(root * 2 + 1 &lt;= end) {
            int child = root * 2 + 1;
            int swap = root;
            if(list[swap] &gt; list[child]) {
                swap = child;
            }

            if(child + 1 &lt;= end &amp;&amp; list[swap] &gt; list[child + 1]) {
                swap = child + 1;
            }

            if(swap != root) {
                swap(list, root, swap);
                root = swap;
            } else {
                return;
            }
        }
    }



    private void siftDownMax(int[] list, int start, int end) {
        int root = start;

        while(root * 2 + 1 &lt;= end) {
            int child = root * 2 + 1;
            int swap = root;
            if(list[swap] &lt; list[child]) {
                swap = child;
            }

            if(child + 1 &lt;= end &amp;&amp; list[swap] &lt; list[child + 1]) {
                swap = child + 1;
            }

            if(swap != root) {
                swap(list, root, swap);
                root = swap;
            } else {
                return;
            }
        }
    }

    public void heapify(int[] list) {
        int start = (list.length - 2) / 2;
        while(start &gt;= 0) {
            siftDown(list, start, list.length - 1);
            start -= 1;
        }
    }

    public void sort(int[] list) {
        heapify(list);
        int end = list.length - 1;
        while(end &gt; 0) {
            swap(list, end, 0);
            end -= 1;
            siftDown(list, 0, end);
        }
    }

    public static void runList(int[] list, Heap heap) {
        System.out.println("before: " + Arrays.toString(list));
        HeapSortSelectHeap s = new HeapSortSelectHeap(heap);
        s.heapify(list);
        System.out.println("heap: " + Arrays.toString(list));
        s.sort(list);
        System.out.println("after: " + Arrays.toString(list));
    }


}
</font>
</pre>
<pre style='background-color:blue;'>
<font color='blue'>
package PukyungUniv;

import static org.junit.Assert.assertEquals;

import java.util.Arrays;

import org.junit.Test;

public class Sort_HeapSort <font color='#ff0000' weight='1' id='720'>{

    private <font color='#ff0000' weight='1' id='55'>static<font color='#ff0000' weight='1' id='54'></font> </font><font color='#ff0000' weight='1' id='57'>int</font> <font color='#ff0000' weight='1' id='60'>getLeftChildIdx</font>(<font color='#ff0000' weight='1' id='62'>int</font> <font color='#ff0000' weight='1' id='65'>parent</font>)<font color='#ff0000' weight='1' id='68'></font> {
        <font color='#ff0000' weight='1' id='90'>return <font color='#ff0000' weight='1' id='88'><font color='#ff0000' weight='1' id='71'>(<font color='#ff0000' weight='1' id='70'></font></font><font color='#ff0000' weight='1' id='73'>parent </font><font color='#ff0000' weight='1' id='75'>+<font color='#ff0000' weight='1' id='74'></font> </font><font color='#ff0000' weight='1' id='77'>1<font color='#ff0000' weight='1' id='76'></font></font><font color='#ff0000' weight='1' id='79'>)<font color='#ff0000' weight='1' id='78'></font> </font><font color='#ff0000' weight='1' id='81'>* </font><font color='#ff0000' weight='1' id='83'>2<font color='#ff0000' weight='1' id='82'></font> </font><font color='#ff0000' weight='1' id='85'>- </font><font color='#ff0000' weight='1' id='87'>1<font color='#ff0000' weight='1' id='86'></font></font>;</font><font color='#ff0000' weight='1' id='89'></font>
    }</font>

    private <font color='#ff0000' weight='1' id='97'>int</font> <font color='#ff0000' weight='1' id='100'>getParentIdx</font>(int <font color='#ff0000' weight='1' id='105'>child</font>) {
        <font color='#ff0000' weight='1' id='153'>if <font color='#ff0000' weight='1' id='118'>(<font color='#ff0000' weight='1' id='111'>child </font><font color='#ff0000' weight='1' id='113'>&lt;<font color='#ff0000' weight='1' id='112'></font> </font><font color='#ff0000' weight='1' id='115'>1<font color='#ff0000' weight='1' id='114'></font></font>)</font><font color='#ff0000' weight='1' id='128'> <font color='#ff0000' weight='1' id='127'>{
            <font color='#ff0000' weight='1' id='125'>return <font color='#ff0000' weight='1' id='123'><font color='#ff0000' weight='1' id='120'>-<font color='#ff0000' weight='1' id='119'></font></font><font color='#ff0000' weight='1' id='122'>1<font color='#ff0000' weight='1' id='121'></font></font>;</font><font color='#ff0000' weight='1' id='124'></font>
        }</font><font color='#ff0000' weight='1' id='126'></font></font> </font><font color='#ff0000' weight='1' id='152'>else <font color='#ff0000' weight='1' id='151'>{
            <font color='#ff0000' weight='1' id='149'>return <font color='#ff0000' weight='1' id='147'><font color='#ff0000' weight='1' id='130'>(<font color='#ff0000' weight='1' id='129'></font></font><font color='#ff0000' weight='1' id='132'>child </font><font color='#ff0000' weight='1' id='134'>+<font color='#ff0000' weight='1' id='133'></font> </font><font color='#ff0000' weight='1' id='136'>1<font color='#ff0000' weight='1' id='135'></font></font><font color='#ff0000' weight='1' id='138'>)<font color='#ff0000' weight='1' id='137'></font> </font><font color='#ff0000' weight='1' id='140'>/<font color='#ff0000' weight='1' id='139'></font> </font><font color='#ff0000' weight='1' id='142'>2<font color='#ff0000' weight='1' id='141'></font> </font><font color='#ff0000' weight='1' id='144'>-<font color='#ff0000' weight='1' id='143'></font> </font><font color='#ff0000' weight='1' id='146'>1<font color='#ff0000' weight='1' id='145'></font></font>;</font><font color='#ff0000' weight='1' id='148'></font>
        }</font><font color='#ff0000' weight='1' id='150'></font></font></font>
    }</font><font color='#ff0000' weight='1' id='154'></font>

    private <font color='#ff0000' weight='1' id='160'>static<font color='#ff0000' weight='1' id='159'></font> </font>void <font color='#ff0000' weight='1' id='165'>maxHeapify</font>(int[] <font color='#ff0000' weight='1' id='173'>data</font>, int <font color='#ff0000' weight='1' id='180'>i</font>, int end) {
        int <font color='#ff0000' weight='1' id='196'>leftChild </font>= <font color='#ff0000' weight='1' id='206'><font color='#ff0000' weight='1' id='205'><font color='#ff0000' weight='1' id='198'>getLeftChildIdx<font color='#ff0000' weight='1' id='197'></font></font><font color='#ff0000' weight='1' id='204'>(<font color='#ff0000' weight='1' id='202'><font color='#ff0000' weight='1' id='201'><font color='#ff0000' weight='1' id='200'>i</font></font>)</font><font color='#ff0000' weight='1' id='203'></font></font></font></font>;
        <font color='#ff0000' weight='1' id='373'>while (<font color='#ff0000' weight='1' id='212'>leftChild </font>&lt;= end) <font color='#ff0000' weight='1' id='372'>{
            int <font color='#ff0000' weight='1' id='224'>largeChild</font>;
            <font color='#ff0000' weight='1' id='298'>if (<font color='#ff0000' weight='1' id='234'><font color='#ff0000' weight='1' id='229'>leftChild </font><font color='#ff0000' weight='1' id='231'>== </font><font color='#ff0000' weight='1' id='233'>end</font>)</font> {
                <font color='#ff0000' weight='1' id='238'>largeChild </font>= <font color='#ff0000' weight='1' id='242'>leftChild</font>;
            } <font color='#ff0000' weight='1' id='297'>else <font color='#ff0000' weight='1' id='296'>{
                <font color='#ff0000' weight='1' id='294'><font color='#ff0000' weight='1' id='292'><font color='#ff0000' weight='1' id='250'>largeChild </font><font color='#ff0000' weight='1' id='252'>= </font><font color='#ff0000' weight='1' id='291'><font color='#ff0000' weight='1' id='277'><font color='#ff0000' weight='1' id='275'><font color='#ff0000' weight='1' id='254'>data</font>[<font color='#ff0000' weight='1' id='256'>leftChild</font>] &gt; <font color='#ff0000' weight='1' id='264'>data</font>[<font color='#ff0000' weight='1' id='266'>leftChild </font>+ 1] ?</font></font><font color='#ff0000' weight='1' id='282'> <font color='#ff0000' weight='1' id='280'><font color='#ff0000' weight='1' id='279'>leftChild</font> </font><font color='#ff0000' weight='1' id='281'></font></font><font color='#ff0000' weight='1' id='290'>: <font color='#ff0000' weight='1' id='289'><font color='#ff0000' weight='1' id='284'>leftChild </font>+ 1</font></font></font>;</font>
            }</font></font></font>
            </font><font color='#ff0000' weight='1' id='325'>if (<font color='#ff0000' weight='1' id='306'><font color='#ff0000' weight='1' id='300'>data</font><font color='#ff0000' weight='1' id='305'>[<font color='#ff0000' weight='1' id='303'><font color='#ff0000' weight='1' id='302'>i<font color='#ff0000' weight='1' id='301'></font></font>]</font><font color='#ff0000' weight='1' id='304'></font></font> </font><font color='#ff0000' weight='1' id='308'>&gt;= </font><font color='#ff0000' weight='1' id='316'><font color='#ff0000' weight='1' id='310'>data</font><font color='#ff0000' weight='1' id='315'>[<font color='#ff0000' weight='1' id='313'><font color='#ff0000' weight='1' id='312'>largeChild<font color='#ff0000' weight='1' id='311'></font></font>]</font><font color='#ff0000' weight='1' id='314'></font></font></font>)<font color='#ff0000' weight='1' id='324'> <font color='#ff0000' weight='1' id='323'>{
                <font color='#ff0000' weight='1' id='321'>return;<font color='#ff0000' weight='1' id='320'></font>
            }</font><font color='#ff0000' weight='1' id='322'></font></font></font>
            </font>swap(<font color='#ff0000' weight='1' id='329'>data</font>, <font color='#ff0000' weight='1' id='333'>i</font>, <font color='#ff0000' weight='1' id='337'>largeChild</font>);
            <font color='#ff0000' weight='1' id='347'>i </font>= <font color='#ff0000' weight='1' id='351'>largeChild</font>;
            <font color='#ff0000' weight='1' id='370'><font color='#ff0000' weight='1' id='368'><font color='#ff0000' weight='1' id='356'>leftChild<font color='#ff0000' weight='1' id='355'></font> </font><font color='#ff0000' weight='1' id='358'>=<font color='#ff0000' weight='1' id='357'></font> </font><font color='#ff0000' weight='1' id='367'><font color='#ff0000' weight='1' id='360'>getLeftChildIdx<font color='#ff0000' weight='1' id='359'></font></font><font color='#ff0000' weight='1' id='366'>(<font color='#ff0000' weight='1' id='364'><font color='#ff0000' weight='1' id='363'><font color='#ff0000' weight='1' id='362'>i<font color='#ff0000' weight='1' id='361'></font></font></font>)</font><font color='#ff0000' weight='1' id='365'></font></font></font>;</font><font color='#ff0000' weight='1' id='369'></font>
        }</font><font color='#ff0000' weight='1' id='371'></font></font>
    }</font>

    <font color='#ff0000' weight='1' id='468'>private <font color='#ff0000' weight='1' id='380'>static<font color='#ff0000' weight='1' id='379'></font> </font>void <font color='#ff0000' weight='1' id='385'>swap</font>(int[] <font color='#ff0000' weight='1' id='393'>data</font>, int <font color='#ff0000' weight='1' id='400'>i</font>, int <font color='#ff0000' weight='1' id='407'>j</font>) <font color='#ff0000' weight='1' id='467'>{
        int <font color='#ff0000' weight='1' id='416'>t </font>= <font color='#ff0000' weight='1' id='424'><font color='#ff0000' weight='1' id='418'>data</font><font color='#ff0000' weight='1' id='423'>[<font color='#ff0000' weight='1' id='421'><font color='#ff0000' weight='1' id='420'>i<font color='#ff0000' weight='1' id='419'></font></font>]</font><font color='#ff0000' weight='1' id='422'></font></font></font>;
        <font color='#ff0000' weight='1' id='450'><font color='#ff0000' weight='1' id='448'><font color='#ff0000' weight='1' id='431'>data</font>[<font color='#ff0000' weight='1' id='433'>i</font>] <font color='#ff0000' weight='1' id='439'>= </font><font color='#ff0000' weight='1' id='441'>data</font>[<font color='#ff0000' weight='1' id='443'>j</font>];</font><font color='#ff0000' weight='1' id='449'></font>
        </font><font color='#ff0000' weight='1' id='465'><font color='#ff0000' weight='1' id='463'><font color='#ff0000' weight='1' id='452'>data</font>[<font color='#ff0000' weight='1' id='454'>j</font>] <font color='#ff0000' weight='1' id='460'>= </font><font color='#ff0000' weight='1' id='462'>t</font>;</font><font color='#ff0000' weight='1' id='464'></font>
    }</font><font color='#ff0000' weight='1' id='466'></font></font>

    </font><font color='#ff0000' weight='1' id='516'><font color='#ff0000' weight='1' id='470'>public<font color='#ff0000' weight='1' id='469'></font> </font><font color='#ff0000' weight='1' id='472'>static<font color='#ff0000' weight='1' id='471'></font> </font><font color='#ff0000' weight='1' id='475'><font color='#ff0000' weight='1' id='474'>void</font> </font><font color='#ff0000' weight='1' id='477'>sort</font><font color='#ff0000' weight='1' id='489'>(<font color='#ff0000' weight='1' id='487'><font color='#ff0000' weight='1' id='486'><font color='#ff0000' weight='1' id='483'><font color='#ff0000' weight='1' id='482'><font color='#ff0000' weight='1' id='479'>int</font><font color='#ff0000' weight='1' id='481'>[]<font color='#ff0000' weight='1' id='480'></font></font></font> </font><font color='#ff0000' weight='1' id='485'>data</font></font>)</font><font color='#ff0000' weight='1' id='488'></font> </font><font color='#ff0000' weight='1' id='515'>{
        <font color='#ff0000' weight='1' id='491'>makeHeap</font>(<font color='#ff0000' weight='1' id='493'>data</font>)<font color='#ff0000' weight='1' id='496'></font>;
        <font color='#ff0000' weight='1' id='510'><font color='#ff0000' weight='1' id='503'>sortFromHeap</font><font color='#ff0000' weight='1' id='509'>(<font color='#ff0000' weight='1' id='507'><font color='#ff0000' weight='1' id='506'><font color='#ff0000' weight='1' id='505'>data<font color='#ff0000' weight='1' id='504'></font></font></font>)</font><font color='#ff0000' weight='1' id='508'></font></font></font>;
    }</font>

    </font><font color='#ff0000' weight='1' id='614'><font color='#ff0000' weight='1' id='518'>private<font color='#ff0000' weight='1' id='517'></font> </font><font color='#ff0000' weight='1' id='520'>static </font>void <font color='#ff0000' weight='1' id='525'>makeHeap</font>(int[] <font color='#ff0000' weight='1' id='533'>data</font>) {
        <font color='#ff0000' weight='1' id='611'>for <font color='#ff0000' weight='1' id='579'>(<font color='#ff0000' weight='1' id='562'><font color='#ff0000' weight='1' id='560'>int <font color='#ff0000' weight='1' id='542'>i </font>= <font color='#ff0000' weight='1' id='544'>data</font>.length <font color='#ff0000' weight='1' id='551'>/ </font>2 <font color='#ff0000' weight='1' id='555'>- </font><font color='#ff0000' weight='1' id='557'>1</font>;</font><font color='#ff0000' weight='1' id='561'></font> </font><font color='#ff0000' weight='1' id='571'><font color='#ff0000' weight='1' id='564'>i </font>&gt;= 0; </font><font color='#ff0000' weight='1' id='577'><font color='#ff0000' weight='1' id='576'><font color='#ff0000' weight='1' id='573'>i<font color='#ff0000' weight='1' id='572'></font></font><font color='#ff0000' weight='1' id='575'>--<font color='#ff0000' weight='1' id='574'></font></font></font>)</font><font color='#ff0000' weight='1' id='578'></font> </font><font color='#ff0000' weight='1' id='610'>{
            <font color='#ff0000' weight='1' id='581'>maxHeapify</font>(<font color='#ff0000' weight='1' id='583'>data</font>, <font color='#ff0000' weight='1' id='587'>i</font>, <font color='#ff0000' weight='1' id='591'>data</font>.length - 1);
        }<font color='#ff0000' weight='1' id='609'></font></font>
    }</font>

    </font><font color='#ff0000' weight='1' id='616'>private<font color='#ff0000' weight='1' id='615'></font> </font><font color='#ff0000' weight='1' id='618'>static </font>void <font color='#ff0000' weight='1' id='623'>sortFromHeap</font>(int[] <font color='#ff0000' weight='1' id='631'>data</font>) {
        int <font color='#ff0000' weight='1' id='640'>last </font>= <font color='#ff0000' weight='1' id='642'>data</font>.length - 1;
        <font color='#ff0000' weight='1' id='715'>while (<font color='#ff0000' weight='1' id='658'>last </font>&gt; 0) {
            swap(<font color='#ff0000' weight='1' id='669'>data</font>, <font color='#ff0000' weight='1' id='673'>0<font color='#ff0000' weight='1' id='672'></font></font>, <font color='#ff0000' weight='1' id='677'>last<font color='#ff0000' weight='1' id='676'></font></font>);
            <font color='#ff0000' weight='1' id='687'>last</font><font color='#ff0000' weight='1' id='689'>--</font>;
            <font color='#ff0000' weight='1' id='694'>maxHeapify</font>(<font color='#ff0000' weight='1' id='696'>data</font>, 0, <font color='#ff0000' weight='1' id='704'>last</font>);
        }
    }</font>

}<font color='#ff0000' weight='1' id='719'></font></font>
</font>
</pre>
