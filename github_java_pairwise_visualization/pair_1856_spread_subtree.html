<pre style='background-color:blue;'>
<font color='blue'>
    public <font color='#0000ff' weight='0.00077821' id='4'>void</font> <font color='#0000ff' weight='0.00077821' id='7'>sort</font><font color='#0008ff' weight='0.00856031' id='19'>(Comparable[] a) </font>{
        <font color='#0002ff' weight='0.00207523' id='36'><font color='#0000ff' weight='0.000907912' id='34'>int <font color='#0000ff' weight='2.16169e-05' id='24'>N </font><font color='#0000ff' weight='0.000172936' id='33'>= a.length</font>;</font>
        </font><font color='#0000ff' weight='2.1617e-05' id='38'>int</font> h = 1;
        while <font color='#0000ff' weight='0.00077821' id='61'>(h &lt; <font color='#0000ff' weight='6.48508e-06' id='54'>N </font>/ 3)
            </font><font color='#0001ff' weight='0.00103761' id='78'><font color='#0000ff' weight='4.6322e-06' id='63'>h </font>= h * 3 + 1;</font>
        while (<font color='#0000ff' weight='0.000194553' id='87'>h <font color='#0000ff' weight='1.08085e-05' id='84'>&gt;= </font>1)</font> {
            for <font color='#0000ff' weight='0.000302637' id='118'>(<font color='#0000ff' weight='2.97233e-05' id='101'><font color='#0000ff' weight='1.21595e-05' id='99'>int i = 0;</font> </font><font color='#0000ff' weight='8.10636e-06' id='108'>i <font color='#0000ff' weight='4.50353e-07' id='105'>&lt; </font>N;</font> <font color='#0000ff' weight='1.35106e-05' id='116'><font color='#0000ff' weight='1.35106e-06' id='112'>i</font><font color='#0000ff' weight='1.35106e-06' id='114'>++</font>)</font> </font><font color='#0001ff' weight='0.00104842' id='216'>{
                <font color='#0000ff' weight='9.00706e-07' id='120'>count</font>++;
                for (<font color='#0000ff' weight='2.02659e-06' id='135'><font color='#0000ff' weight='1.50118e-07' id='128'>int </font><font color='#0000ff' weight='7.50588e-08' id='130'>j </font><font color='#0000ff' weight='2.25177e-07' id='134'>= <font color='#0000ff' weight='7.50588e-08' id='132'>i</font></font>;</font> <font color='#0000ff' weight='1.75638e-05' id='177'><font color='#0000ff' weight='8.33153e-06' id='175'>j <font color='#0000ff' weight='4.50353e-08' id='141'>&gt;= </font>h <font color='#0000ff' weight='4.50353e-08' id='145'>&amp;&amp; </font>less(<font color='#0000ff' weight='6.7553e-08' id='157'><font color='#0000ff' weight='6.00471e-08' id='156'><font color='#0000ff' weight='5.25412e-08' id='155'>a[j]</font></font>, </font><font color='#0000ff' weight='8.25647e-08' id='169'><font color='#0000ff' weight='3.75294e-09' id='159'>a</font>[<font color='#0000ff' weight='1.12588e-08' id='166'><font color='#0000ff' weight='6.2549e-10' id='161'>j </font>- h]</font></font>);</font> </font><font color='#0000ff' weight='1.50118e-07' id='179'>j </font><font color='#0000ff' weight='1.50118e-07' id='181'>-= </font><font color='#0000ff' weight='1.50118e-07' id='183'>h</font>) <font color='#0000ff' weight='4.50353e-05' id='213'>{
                    <font color='#0000ff' weight='2.07162e-05' id='211'><font color='#0000ff' weight='9.45741e-06' id='209'><font color='#0000ff' weight='2.25176e-07' id='189'>exch</font><font color='#0000ff' weight='3.828e-06' id='207'>(<font color='#0000ff' weight='1.12588e-07' id='192'><font color='#0000ff' weight='5.62941e-08' id='191'>a</font></font>, j, <font color='#0000ff' weight='3.37765e-07' id='204'>j <font color='#0000ff' weight='1.87647e-08' id='201'>- </font><font color='#0000ff' weight='1.87647e-08' id='203'>h</font></font>)</font>;</font>
                }</font></font>
            }</font>
            <font color='#0000ff' weight='0.000172936' id='226'><font color='#0000ff' weight='6.48508e-05' id='224'>h <font color='#0000ff' weight='3.60282e-06' id='221'>/= </font><font color='#0000ff' weight='3.60282e-06' id='223'>3</font>;</font>
        }</font>
        <font color='#0000ff' weight='6.48508e-06' id='231'>System</font><font color='#0000ff' weight='6.48508e-06' id='233'>.</font>out.println(<font color='#0000ff' weight='5.40424e-06' id='242'>count </font><font color='#0000ff' weight='5.40424e-06' id='244'>/ </font>N);
    }</font>
</pre>
<pre style='background-color:blue;'>
<font color='blue'>

    public static void buildheap(int []a){
        n=a.length-1;
        for(int i=n/2;i&gt;=0;i--){
            maxheap(a,i);
        }
    }
    
    public static void maxheap(int[] a, int i){ 
        left=2*i;
        right=2*i+1;
        if(left &lt;= n &amp;&amp; a[left] &gt; a[i]){
            largest=left;
        }
        else{
            largest=i;
        }
        
        if<font color='#ff0000' weight='1' id='235'>(<font color='#00ff24' weight='0.464286' id='233'><font color='#0002ff' weight='0.00255102' id='208'>right </font><font color='#0002ff' weight='0.00255102' id='210'>&lt;= </font><font color='#0002ff' weight='0.00255102' id='212'>n </font><font color='#0002ff' weight='0.00255102' id='214'>&amp;&amp; </font><font color='#0012ff' weight='0.0178571' id='222'><font color='#0001ff' weight='0.00127551' id='216'>a</font><font color='#0005ff' weight='0.00510204' id='221'>[<font color='#0001ff' weight='0.00127551' id='219'><font color='#0000ff' weight='0.000637755' id='218'>right</font>]</font></font> </font><font color='#0002ff' weight='0.00255102' id='224'>&gt; </font><font color='#0012ff' weight='0.0178571' id='232'><font color='#0001ff' weight='0.00127551' id='226'>a</font><font color='#0005ff' weight='0.00510204' id='231'>[<font color='#0001ff' weight='0.00127551' id='229'><font color='#0000ff' weight='0.000637755' id='228'>largest</font>]</font></font></font>)</font></font>{
            largest=right;
        }
        if(largest!=i){
            exchange(i,largest);
            maxheap(a, largest);
        }
    }
    
    public static void exchange(int i, int j){
        int t=a[i];
        a[i]=a[j];
        a[j]=t; 
        }
    
    public static void sort(int []a0){
        a=a0;
        buildheap(a);
        
        for(int i=n;i&gt;0;i--){
            exchange(0, i);
            n=n-1;
            maxheap(a, 0);
        }
    }</font>
</pre>
